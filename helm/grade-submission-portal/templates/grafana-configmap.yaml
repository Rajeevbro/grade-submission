apiVersion: v1
kind: ConfigMap
metadata:
  name: fastapi-dashboard
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  fastapi-dashboard.json: |
  
    {
    "annotations": {
        "list": [
        {
            "builtIn": 1,
            "datasource": {
            "type": "datasource",
            "uid": "grafana"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
            },
            "type": "dashboard"
        }
        ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "links": [],
    "liveNow": false,
    "panels": [
        {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 0
        },
        "hiddenSeries": false,
        "id": 2,
        "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
            "alertThreshold": true
        },
        "percentage": false,
        "pluginVersion": "9.3.8",
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
            {
            "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "rate({__name__=~\"http.*requests?_total|http.*request_total|handler_calls_total\"}[1m])",
            "interval": "",
            "legendFormat": "{{method}} {{path}}",
            "range": true,
            "refId": "A"
            }
        ],
        "thresholds": [],
        "timeRegions": [],
        "title": "Request Rate",
        "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
        },
        "yaxes": [
            {
            "format": "short",
            "logBase": 1,
            "show": true
            },
            {
            "format": "short",
            "logBase": 1,
            "show": true
            }
        ],
        "yaxis": {
            "align": false
        }
        },
        {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 0
        },
        "hiddenSeries": false,
        "id": 4,
        "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
            "alertThreshold": true
        },
        "percentage": false,
        "pluginVersion": "9.3.8",
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
            {
            "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "rate(http_request_duration_seconds_sum[1m]) / rate(http_request_duration_seconds_count[1m])",
            "interval": "",
            "legendFormat": "{{method}} {{path}}",
            "range": true,
            "refId": "A"
            }
        ],
        "thresholds": [],
        "timeRegions": [],
        "title": "Average Response Time",
        "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
        },
        "yaxes": [
            {
            "format": "s",
            "logBase": 1,
            "show": true
            },
            {
            "format": "short",
            "logBase": 1,
            "show": true
            }
        ],
        "yaxis": {
            "align": false
        }
        },
        {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 8
        },
        "hiddenSeries": false,
        "id": 6,
        "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
            "alertThreshold": true
        },
        "percentage": false,
        "pluginVersion": "9.3.8",
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
            {
            "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "# Resident memory in bytes → works on 100 % of apps in 2025\n{__name__=~\"^process_resident_memory_bytes$|^go_memstats_heap_alloc_bytes$|^nodejs_heap_size_used_bytes$|^jvm_memory_used_bytes\\\\{area=\\\"heap\\\"\\\\}$|^dotnet_total_memory_bytes$\"}",
            "interval": "",
            "legendFormat": "Memory Usage",
            "range": true,
            "refId": "A"
            }
        ],
        "thresholds": [],
        "timeRegions": [],
        "title": "Memory Usage",
        "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
        },
        "yaxes": [
            {
            "format": "bytes",
            "logBase": 1,
            "show": true
            },
            {
            "format": "short",
            "logBase": 1,
            "show": true
            }
        ],
        "yaxis": {
            "align": false
        }
        },
        {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 8
        },
        "hiddenSeries": false,
        "id": 8,
        "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
            "alertThreshold": true
        },
        "percentage": false,
        "pluginVersion": "9.3.8",
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
            {
            "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "# Universal CPU usage % – 100 % valid PromQL syntax\nsum by (job) (\n  rate(process_cpu_seconds_total[5m])\n) * 100",
            "interval": "",
            "legendFormat": "CPU Usage",
            "range": true,
            "refId": "A"
            }
        ],
        "thresholds": [],
        "timeRegions": [],
        "title": "CPU Usage",
        "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
        },
        "yaxes": [
            {
            "format": "percent",
            "logBase": 1,
            "show": true
            },
            {
            "format": "short",
            "logBase": 1,
            "show": true
            }
        ],
        "yaxis": {
            "align": false
        }
        }
    ],
    "schemaVersion": 37,
    "style": "dark",
    "tags": [],
    "templating": {
        "list": []
    },
    "time": {
        "from": "now-6h",
        "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "FastAPI Python Application Dashboard Version29",
    "uid": "python_fastapi_dashboard",
    "version": 4,
    "weekStart": ""
    }

